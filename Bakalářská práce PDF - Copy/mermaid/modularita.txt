graph LR
    subgraph  Data Lake
        A[MariaDB Data Lake]
    end

    subgraph  Transformation I.
        A --> B(ELT Process I: Load & Transform to Staging);
    end
    
    subgraph  ClickHouse data warehouse
        subgraph Staging layer
            C[Staging Table]
        end
        subgraph Facts & dims
            E[Facts & Dimensions Tables]
        end
        B --> C;
        
        subgraph  Transformation II.
            C --> D(ELT Process II: Cleansing & Modeling);
        end
        D --> E;
    end

    subgraph  BI layer
        E --> F(Cube.js Headless BI);
        F --> G(Superset Visualization);
    end